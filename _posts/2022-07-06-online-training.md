---
layout: post
title:  "在线教育系列-Online Training"
date:   2022-07-06 21:45:00
categories: 深度学习
tags: 对话系统 教育 培训 机器人 用户画像
excerpt: 智能培训在在线教育中的探索、应用
author: 鹤啸九天
mathjax: true
---

* content
{:toc}


# 智能培训


# 房产实践

## 用户画像

培训初版画像尽量满足这几个条件：
- （1）便于获取、计算：有现成的数据源，计算方法相对确定
- （2）容易理解：无需过多解释
- （3）原子性：标签、属性之间粒度适中且相对独立
- （4）有潜在业务场景：对培训、任务分发、微聊等有一定价值
- （5）扩展性：兼容其他标签，方便扩展

培训领域画像示例：
- ① 学习态度：区分经纪人在培训产品上重视程度，基于过往培训频次、时长，计算数值，映射到几个区间，如：应付（参与培训1次失败就放弃了）、一般（参与几次培训，分数不理想）、认真（参与几次培训，分数逐渐提升至及格）、重视（参与较多次培训且分数较高）
- ② 学习能力：衡量经纪人培训分数增速，分为：慢、一般、快
- ③ 个性化特征：表达连贯性、普通话标准程度、逻辑性等，跟培训内容关系不大的特征
- ④ 知识掌握程度：对应一系列知识点得分，往图谱方向规划


## AI 培训介绍

【2020年12月15日】
- [北京链家AI讲盘大赛收官，AI和真人双评委评审](https://tech.ifeng.com/c/82E2U6J2iJW)
- [北京链家AI讲盘大赛收官 科技赋能行业服务能力再升级](https://finance.sina.com.cn/tech/2020-12-16/doc-iiznezxs7256961.shtml)

- 12月15日消息，今天，北京链家举办了首届社区百科AI讲盘大赛的决赛，从23000多名经纪人中最终产生的9支经纪人队伍，在AI人工智能和真人双评委的评审下，完成了一场战队之间，以及和AI机器人战队的对决。
- 北京链家总经理李峰岩表示，“在产业互联网时代，如何利用科技创新赋能经纪人成长，进而提升我们对客户的服务品质，一直是链家探索的方向。希望借助此次大赛的推广实践，进一步探究房产经纪行业的未来，让经纪人的成长更加专业化、系统化，从而推动整个行业的升级迭代。”
- ![](https://d.ifengimg.com/w445_h250_q90_webp/x0.ifengimg.com/res/2020/911FE760764ED7F2DDE6F6E6FE5A1739A63CDF50_size237_w445_h250.png)


### 房产NLP

【2023-1-9】贝壳找房【语言模型系列】[实践篇：ALBERT 在房产领域的实践](https://www.6aiq.com/article/1589066895141), 李东超
- 贝壳找房作为中国互联网房产领域领先的服务平台，业务场景中包含了大量的自然语言处理任务，积累了大量的房产领域文本语料，如何更好的利用这些海量的语料，完成各种业务场景的提效，是贝壳找房语言智能与搜索团队面临的挑战之一。

综合贝壳找房多个业务场景下的语料（小贝助手、智能客服、看点、房评等），共准备了约 30G 左右的房产领域语料。

利用房产领域语料进行预训练，需要将大量的房产领域语料转成 tfrecord 格式，以便于进行快速的预训练。tfrecord 的生成主要消耗大量的 CPU 资源，对 GPU 资源没有依赖。一般来讲，我们会把预训练语料进行切分，以便在有限的内存资源中完成 tfrecord 的生成。这里我将原始语料切分为 317 份，每份 50 万行数据，依次生成 tfrecord。

#### 意图识别

意图识别，就是读懂一个 query 表达的意图，比如识别出：
- “我想要一个带阳台的大房子” 表达的意图是“找房”

意图识别就是一个**多分类**任务。房产领域的意图识别主要分为**用户意图识别**和**经纪人意图识别**，其中用户意图体系复杂，任务难度较大，这次实践也是挑了这块难啃的骨头。

用户意图体系定义了 256 个意图类别，由于意图种类过多，难以使用一个模型进行分类表示，所以又将 256 类意图进行向上归类，定义了 13 个技能类别（包含一个 other 类别），每个技能下对应着一部分意图。在预测过程中，query 先经过技能模型，得到技能的标签，然后根据技能标签决定调取哪个意图模型。所以，一共有 1 个技能模型和 12 个意图模型
- ![](https://img.6aiq.com/e/a606d35ddf6f4d5692e88094d8eee67c.png-imageStyle)

起初的技能模型和意图模型都是用的 fasttext。fasttext 虽然是一个很优秀的模型，但也有其缺陷。fasttext 模型对 query 的语义信息识别不充分，对“词”的依赖程度过高，比如技能标签是房屋信息的 query 大多为疑问句，导致 query 中经常出现”吗“这种疑问词，使得可能将“吗？”这种 query 识别成房屋信息。而 albert 这种预训练模型能够获取 query 的语义信息，内部采用注意力机制，对 query 中的每个词分配不同权重，可以在一定程度上避免这种问题的出现。所以将技能模型替换为了 albert
- ![](https://img.6aiq.com/e/f12231f5dc36491cade7d21d7a856927.png-imageStyle)

对意图识别整体架构体系进行变更之前，完成了两版评测--**线下**模型评测及**线上**评测。

线下评测
- 在同等训练集、测试集的情况下，对 fasttext 和 albert 在技能层的效果进行了对比，结果如下

| 模型 | 评测任务 |	效果（acc）|
|---|---|---|
| fasttext	| 意图识别技能层	| 0.75 |
| albert_origin+fine-tuning	| 意图识别技能层	| 0.804 |
| albert_pretrain+fine-tuning	| 意图识别技能层	| 0.832 |

其中
- albert_origin 是没有进行领域预训练的模型，直接使用了作者公开的预训练模型
- albert_pretrain 是利用了房产领域数据进行预训练之后的模型。

albert 的效果是在预训练模型的基础上进行**微调**（fine-tuning）的结果。

在线下评测中
- 技能层的模型由 fasttext 更替到 albert 后，其准确率由 0.51 上升到 0.632，提升了 12.2 个百分点，这个程度的提升还是很明显的。
- 同时 albert_origin 和 albert_pretrain 也存在着 2.8 个点的差异，说明领域预训练是很有必要且效果显著的。

线上模拟评测，采用了 GSB 的评测方法
- 即对一批线上语料，分别使用两个意图识别架构进行预测，并人工标出预上线的架构相较于线上架构的影响。
- 影响包括正向（good）、相同（same）、负向（bad），其中
  - good 指的是新架构预测正确的 case 数量
  - bad 是指线上架构预测正确的 case 数量
  - same 指的是两个架构预测结果相同。

由此来评测出新体系上线后对于线上的作用效果，以下是评测效果。

| 模型	| 评测任务	| 评测数据数量（条）| good |same|bad|
|---|---|---|---|---|---|
| albert_pretrain+fine-tuning |	技能层 |8000 |	1058/0.1323 |	6466/0.8083 |	476/0.0595 |
|  | 意图层 |	8000 |	1115/0.1394	| 6455/0.8069	| 430/0.0537 |

由以上评测可以看出来，在技能层，新的意图识别架构在 8000 条 case 中产生了 1058 条正向影响，476 条负向影响；在意图层，新的意图识别架构在 8000 条 case 中产生了 1115 条正向影响，430 条负向影响。整体结果说明新的意图识别架构体系对于线上的技能层以及意图层均产生了正向的效果。
- 在技能层，新的意图识别架构在 8000 条 case 中产生了 1058 条正向影响，476 条负向影响；
- 在意图层，新的意图识别架构在 8000 条 case 中产生了 1115 条正向影响，430 条负向影响。
- 整体结果说明新的意图识别架构体系对于线上的技能层以及意图层均产生了正向的效果。

### 句式识别

定义
- 根据业务需求，将房产领域的句式分为 5 类，如下所示

| 句式类别	| label	| 定义 |
|---|---|---|
| 疑问句 |	interrogative |	以疑问语气进行询问的语句 |
| 肯定句 |	affirmative	 | 表达肯定语气的陈述句 |
| 反问句 |	rhetorical	| 反问句就是用疑问的句式，表达肯定的观点。反问句表面看来是疑问的形式，但实际上表达的是肯定的意思，答案就在问句之中。|
| 否定句 |	negative	| 表达否定意思的陈述句 |
| 其他 |	unlimited | 只包含标点等符号或无实际意义的句子 |

效果
- 对句式识别进行了一个线下模型的评测，效果如下所示。

| 模型	| 数据集| 效果（acc）|
|---|---|---|
| fasttext | 句式 | 0.946 |
| albert_origin+fine-tuning	| 句式	| 0.962 |
| albert_pretrain+fine-tuning | 句式 | 0.967 |

模型更替后的效果与意图识别的模型更替结论一致。albert 模型在句式识别中的准确率比 fasttext 模型高 2.1 个点，且可以看出来 albert_pretrain 的效果优于 albert_origin。


## AI 讲盘

社区百科AI讲盘通过AI场景化智能技术，帮助房产经纪人实景演练讲盘带看能力。同时，由北京链家学院与贝壳“小贝助手”联合打造的这款AI讲盘产品，已在2020年7月正式上线应用。

### 业务需求

带看时的讲盘是经纪人非常重要的专业能力之一，却长期存在着<span style='color:red'>带看质量不高、时间把控不好、讲解信息不全面、线下练习占用作业时间</span>等问题，制约了经纪人的专业性成长，以及行业服务品质的进一步升级。


### 数据资源

社区百科AI讲盘产品依托于链家和贝壳打造的，国内数据量最大、覆盖面最广、颗粒度最细的房屋信息数据库——楼盘字典，从而拥有了海量、真实的底层大数据。

社区百科AI讲盘产品有一个特殊的数据库—由北京链家几千名一线员工搭建的“**社区档案**”。
- 每一个楼盘都拥有属于自己的一套完备的、个性化的档案资料，已实现了**人机对话**技术与**行业知识图谱**的深度结合，从而让楼盘及社区信息可以全面、真实呈现。

目前“社区档案”中的每个楼盘都有近**100个**题干标签，共超过**4**大题库**238**个问题，包含通用题库，商品房、公房、教育资源拓展题库等，从**小区周边**交通规划、商业人文配套、评估价格、落户政策等基础问题，再到**教育资源**等延展问题，形成了对北京6900多个社区信息的全面覆盖。
- 此外，“社区档案”还会根据客户的反馈，以及实际情况的变化进行内容更新。

### 产品功能

社区百科AI讲盘产品为经纪人营造了多元化的培训场景，机器人小贝可以针对不同经纪人的特点“因材施教”。
- 经纪人通过学习社区资料实战演练讲盘，而小贝能够智能识别经纪人讲盘时的信息全面性、准确度、发音咬字、表达逻辑、讲盘流畅度、连贯性等核心要素，并在闯关结束后给出评分和反馈建议。
- 这一产品能够让经纪人精准知晓问题所在，从而更有针对性地进行练习提升，在高度还原**真实场景**的学习环境中，帮助经纪人收获快速成长。

### 产品效果

北京链家一位经纪人表示：
- 作为刚入行的新人，以前进行讲盘时心里总会发怵，和客户交流时担心自己的专业度不够，现在则可以利用一切碎片时间，随时随地练习讲盘，大大提升了自己的专业能力和自信心。

李峰岩表示
> 自内部推行以来，有超过**96%**的经纪人在该产品中参与了练习，产品所具备的全面丰富详尽的楼盘社区资料库，让经纪人对自己所服务的商圈及目标商圈有更好、更深、更细致的了解，进一步提升了经纪人的专业能力和服务品质。


## VR 带看模拟训练

VR带看培训侧重过程模拟


# 结束